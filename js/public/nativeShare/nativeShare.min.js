var nativeShare=function(e,i){if(!document.getElementById(e))return!1;var t="//3gimg.qq.com/html5/js/qb.js",n="//jsapi.qq.com/get?api=app.share",s={forbid:0,lower:1,higher:2},a={forbid:0,allow:1},o=navigator.appVersion,r=o.split("MQQBrowser/").length>1?s.higher:s.forbid,l=o.split("UCBrowser/").length>1?a.allow:a.forbid,h={uc:"",qq:""},d=!1;i=i||{},this.elementNode=e,this.url=i.url||document.location.href||"",this.title=i.title||document.title||"",this.desc=i.desc||document.title||"",this.img=i.img||document.getElementsByTagName("img").length>0&&document.getElementsByTagName("img")[0].src||"",this.img_title=i.img_title||document.title||"",this.from=i.from||window.location.host||"",this.ucAppList={sinaWeibo:["kSinaWeibo","SinaWeibo",11,"新浪微博"],weixin:["kWeixin","WechatFriends",1,"微信好友"],weixinFriend:["kWeixinFriend","WechatTimeline","8","微信朋友圈"],QQ:["kQQ","QQ","4","QQ好友"],QZone:["kQZone","QZone","3","QQ空间"]},this.share=function(e){var i=this.title,t=this.url,n=this.desc,a=this.img,o=this.img_title,h=this.from;if(l)"QZone"==(e=""==e?"":"iPhone"==platform_os?this.ucAppList[e][0]:this.ucAppList[e][1])&&(B="mqqapi://share/to_qzone?src_type=web&version=1&file_type=news&req_type=1&image_url="+a+"&title="+i+"&description="+n+"&url="+t+"&app_name="+h,k=document.createElement("div"),k.style.visibility="hidden",k.innerHTML='<iframe src="'+B+'" scrolling="no" width="1" height="1"></iframe>',document.body.appendChild(k),setTimeout(function(){k&&k.parentNode&&k.parentNode.removeChild(k)},5e3)),"undefined"!=typeof ucweb?ucweb.startRequest("shell.page_share",[i,i,t,e,"","@"+h,""]):"undefined"!=typeof ucbrowser&&ucbrowser.web_share(i,i,t,e,"","@"+h,"");else if(r&&!d){var p={url:t,title:i,description:n,img_url:a,img_title:o,to_app:e=""==e?"":this.ucAppList[e][2],cus_txt:"请输入此时此刻想要分享的内容"};p=""==e?"":p,"undefined"!=typeof browser?void 0!==browser.app&&r==s.higher&&browser.app.share(p):void 0!==window.qb&&r==s.lower&&window.qb.share(p)}},this.html=function(){document.getElementById(this.elementNode).innerHTML='<div class="label">分享到</div><div class="list clearfix"><span data-app="sinaWeibo" class="nativeShare weibo"><i></i>新浪微博</span><span data-app="weixin" class="nativeShare weixin"><i></i>微信好友</span><span data-app="weixinFriend" class="nativeShare weixin_timeline"><i></i>微信朋友圈</span><span data-app="QQ" class="nativeShare qq"><i></i>QQ好友</span><span data-app="QZone" class="nativeShare qzone"><i></i>QQ空间</span><span data-app="" class="nativeShare more"><i></i>更多</span></div>'},this.isloadqqApi=function(){if(r){var e=h.qq<5.4?t:n,i=document.createElement("script"),s=document.getElementsByTagName("body")[0];i.setAttribute("src",e),s.appendChild(i)}},this.getPlantform=function(){return ua=navigator.userAgent,ua.indexOf("iPhone")>-1||ua.indexOf("iPod")>-1?"iPhone":"Android"},this.is_weixin=function(){return"micromessenger"==o.toLowerCase().match(/MicroMessenger/i)},this.getVersion=function(e){var i=e.split(".");return parseFloat(i[0]+"."+i[1])},this.init=function(){platform_os=this.getPlantform(),h.qq=r?this.getVersion(o.split("MQQBrowser/")[1]):0,h.uc=l?this.getVersion(o.split("UCBrowser/")[1]):0,d=this.is_weixin(),r&&h.qq<5.4&&"iPhone"==platform_os||r&&h.qq<5.3&&"Android"==platform_os?r=s.forbid:r&&h.qq<5.4&&"Android"==platform_os?r=s.lower:l&&(h.uc<10.2&&"iPhone"==platform_os||h.uc<9.7&&"Android"==platform_os)&&(l=a.forbid),this.isloadqqApi(),r||l?this.html():document.write("目前该分享插件仅支持手机UC浏览器和QQ浏览器")},this.init();for(var p=this,c=document.getElementsByClassName("nativeShare"),m=0;m<c.length;m++)c[m].onclick=function(){p.share(this.getAttribute("data-app"))};return this};